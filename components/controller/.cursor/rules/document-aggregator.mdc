---
alwaysApply: false
globs: **/controller/**/*.resolver.ts
---
## üìã –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### üìù **–í —Å–µ—Ä–≤–∏—Å–∞—Ö**
1. **–ò–Ω–∂–µ–∫—Ç DocumentAggregationService** –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–µ—Ä–≤–∏—Å–∞
2. **–°–æ–∑–¥–∞–π async –º–µ—Ç–æ–¥ toDTO** –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ DTO
3. **–í—ã–∑—ã–≤–∞–π buildDocumentAggregate()** –¥–ª—è –ø–æ–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:
   ```typescript
   const document = await this.documentAggregationService.buildDocumentAggregate(entity.documentField);
   ```
4. **–î–æ–±–∞–≤—å –ø–æ–ª–µ document –≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç**

### üéØ **–í DTO**
1. **–ò–º–ø–æ—Ä—Ç DocumentAggregateDTO**
2. **–î–æ–±–∞–≤—å –ø–æ–ª–µ document** —Å —Ç–∏–ø–æ–º `DocumentAggregateDTO | null`
3. **nullable: true** –≤ GraphQL –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ

### üîÑ **–í —Ä–µ–∑–æ–ª–≤–µ—Ä–∞—Ö**
- **–ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–π** - —Ä–µ–∑–æ–ª–≤–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç DTO —Å –ø–æ–ª–µ–º document

### ‚ö° **–ß–µ–∫-–ª–∏—Å—Ç**
- ‚úÖ DocumentAggregationService –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ú–µ—Ç–æ–¥ toDTO —Å—Ç–∞–ª async
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã toDTO —Å—Ç–∞–ª–∏ await
- ‚úÖ –ü–æ–ª–µ document –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ DTO
- ‚úÖ –ò–º–ø–æ—Ä—Ç DocumentAggregateDTO –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ –¢–∏–ø –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (DocumentAggregateDTO | null)
