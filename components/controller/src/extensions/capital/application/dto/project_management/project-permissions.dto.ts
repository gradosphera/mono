import { ObjectType, Field } from '@nestjs/graphql';

/**
 * DTO для прав доступа к проекту
 * Содержит набор флагов, определяющих возможности текущего пользователя
 * относительно конкретного проекта
 */
@ObjectType('CapitalProjectPermissions', {
  description: 'Права доступа пользователя к проекту',
})
export class ProjectPermissionsOutputDTO {
  /**
   * Может ли пользователь редактировать проект (название, описание, мета и т.д.)
   * true если пользователь является мастером проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли редактировать проект (название, описание, мета и т.д.)',
  })
  can_edit_project!: boolean;

  /**
   * Может ли пользователь управлять задачами в проекте (создавать, редактировать)
   * true если пользователь является мастером проекта или участником проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли управлять задачами в проекте',
  })
  can_manage_issues!: boolean;

  /**
   * Может ли пользователь изменять статус проекта (запускать, останавливать, открывать, закрывать)
   * true только если пользователь имеет роль 'chairman'
   */
  @Field(() => Boolean, {
    description: 'Может ли изменять статус проекта',
  })
  can_change_project_status!: boolean;

  /**
   * Может ли пользователь удалить проект
   * true только если пользователь имеет роль 'chairman'
   */
  @Field(() => Boolean, {
    description: 'Может ли удалить проект',
  })
  can_delete_project!: boolean;

  /**
   * Может ли пользователь устанавливать мастера проекта
   * true только если пользователь имеет роль 'chairman'
   */
  @Field(() => Boolean, {
    description: 'Может ли устанавливать мастера проекта',
  })
  can_set_master!: boolean;

  /**
   * Может ли пользователь управлять авторами проекта (добавлять, удалять)
   * true если пользователь является мастером проекта или имеет роль 'chairman'
   */
  @Field(() => Boolean, {
    description: 'Может ли управлять авторами проекта',
  })
  can_manage_authors!: boolean;

  /**
   * Может ли пользователь устанавливать план проекта
   * true если пользователь является мастером проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли устанавливать план проекта',
  })
  can_set_plan!: boolean;

  /**
   * Может ли пользователь создавать требования к проекту
   * true только если пользователь является мастером проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли создавать требования к проекту',
  })
  can_create_requirement!: boolean;

  /**
   * Может ли пользователь удалять требования к проекту
   * true только если пользователь является мастером проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли удалять требования к проекту',
  })
  can_delete_requirement!: boolean;

  /**
   * Может ли пользователь выполнять требования к проекту
   * true только если пользователь является мастером проекта
   */
  @Field(() => Boolean, {
    description: 'Может ли выполнять требования к проекту',
  })
  can_complete_requirement!: boolean;

  /**
   * Имеет ли пользователь подтвержденное приложение (clearance) для проекта
   * true если у пользователя есть подтвержденное приложение для данного проекта
   */
  @Field(() => Boolean, {
    description: 'Имеет ли подтвержденное приложение для проекта',
  })
  has_clearance!: boolean;

  /**
   * Есть ли у пользователя запрос на получение допуска в рассмотрении
   * true если у пользователя есть приложение со статусом CREATED для данного проекта
   */
  @Field(() => Boolean, {
    description: 'Есть ли запрос на получение допуска в рассмотрении',
  })
  pending_clearance!: boolean;

  /**
   * Является ли пользователь гостем (неавторизованным)
   * true только если пользователь не авторизован, false для всех авторизованных пользователей
   */
  @Field(() => Boolean, {
    description: 'Является ли пользователь гостем (неавторизованным)',
  })
  is_guest!: boolean;
}
