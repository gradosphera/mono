import { ObjectType, Field } from '@nestjs/graphql';

/**
 * DTO для прав доступа к задаче
 * Содержит набор флагов, определяющих возможности текущего пользователя
 * относительно конкретной задачи
 */
@ObjectType('CapitalIssuePermissions', {
  description: 'Права доступа пользователя к задаче',
})
export class IssuePermissionsOutputDTO {
  /**
   * Может ли пользователь редактировать задачу (название, описание, приоритет и т.д.)
   * true если пользователь является мастером проекта/компонента или подмастерьем задачи
   */
  @Field(() => Boolean, {
    description: 'Может ли редактировать задачу (название, описание, приоритет и т.д.)',
  })
  can_edit_issue!: boolean;

  /**
   * Может ли пользователь изменять статусы задачи
   * true если пользователь является мастером проекта/компонента, подмастерьем задачи
   * или любым участником проекта (кроме статуса DONE)
   */
  @Field(() => Boolean, {
    description: 'Может ли изменять статусы задачи',
  })
  can_change_status!: boolean;

  /**
   * Может ли пользователь устанавливать статус DONE
   * true только если пользователь является мастером проекта или связанного с ним компонента
   */
  @Field(() => Boolean, {
    description: 'Может ли устанавливать статус DONE (выполнена)',
  })
  can_set_done!: boolean;

  /**
   * Может ли пользователь устанавливать статус ON_REVIEW
   * true только если пользователь является подмастерьем задачи
   */
  @Field(() => Boolean, {
    description: 'Может ли устанавливать статус ON_REVIEW (на проверке)',
  })
  can_set_on_review!: boolean;

  /**
   * Может ли пользователь удалить задачу
   * true только если пользователь имеет роль 'chairman'
   */
  @Field(() => Boolean, {
    description: 'Может ли удалить задачу',
  })
  can_delete_issue!: boolean;
}
