# Синхронизация Novu Workflows

Эта папка содержит серверную логику для синхронизации воркфлоу с Novu API.

## Файлы

- `novu-sync.service.ts` - Сервис для работы с Novu API
- `sync-runner.ts` - Скрипт для запуска синхронизации
- `README.md` - Этот файл

## Использование

### Production режим (один раз)
```bash
pnpm run sync
```

### Development режим (watch)
```bash
pnpm run sync:dev
# или
pnpm run sync:watch
```

## Переменные окружения

Требуются следующие переменные:
- `NOVU_API_KEY` - API ключ для Novu
- `NOVU_API_URL` - URL Novu API (по умолчанию: https://api.novu.co)

## Режимы работы

### Production
- Запускается один раз
- Синхронизирует все воркфлоу
- Завершается после выполнения

### Development
- Запускается и остается активным
- Отслеживает изменения в папках `workflows/` и `types/`
- Автоматически перезапускает синхронизацию при изменениях
- Дебаунс 1 секунда для избежания множественных запусков

## Как работает

1. Загружает все воркфлоу из `../workflows/index.ts`
2. Для каждого воркфлоу:
   - Проверяет существование в Novu API
   - Создает новый или обновляет существующий
3. Логирует результаты операций

## Важно

⚠️ Этот модуль предназначен только для серверного использования и не должен импортироваться на фронтенде! 