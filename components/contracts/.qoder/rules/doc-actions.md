---
description:
alwaysApply: false
---
–ú–Ω–µ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ç—ã –ø—Ä–æ—à–µ–ª—Å—è –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –∏ —Ä–∞–∑–Ω–µ—Å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º —Ç–∞–∫, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ. –¢–∞–º:
- —É–∫–∞–∑–∞–Ω–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –∫ —á–µ–º—É –ø—Ä–∏–≤–æ–¥–∏—Ç
- —É–∫–∞–∑–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ
- —É–∫–∞–∑–∞–Ω–∞ –≥—Ä—É–ø–ø–∞ public_actions –∏ public_soviet_actions - –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å–æ–≤–µ—Ç–∞, –Ω–æ —É —Ç–µ–±—è –º–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç 
- —É–∫–∞–∑–∞–Ω —è–∫–æ—Ä—å –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤–Ω–µ—à–Ω–∏—Ö –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –∏ —Å –æ—Ç—Å—Ç—É–ø–æ–º
- —É–∫–∞–∑–∞–Ω–∞ —Ç—Ä–µ–±—É–µ–º–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –µ—Å–ª–∏ —É –¥–µ–π—Å—Ç–≤–∏—è –µ—Å—Ç—å –ø—Ä–æ–≤–æ–¥–∫–∏ –ø–æ –∫–æ—à–µ–ª—å–∫–æ–≤ –∏–ª–∏ —Ñ–æ–Ω–¥–∞–º - –æ—Ç–º–µ—Ç–∏—Ç—å –∏—Ö —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–∞ @post:
  * | –ú–µ—Ç–æ–¥                  | –ò–∫–æ–Ω–∫–∏         | –û–ø–∏—Å–∞–Ω–∏–µ                              |
  * |:-----------------------|:---------------|:--------------------------------------|
  * | Wallet::add_available_funds    | `üí∞‚ûï‚úÖ`        | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤          |
  * | Wallet::sub_available_funds    | `üí∞‚ûñ‚úÖ`        | –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤            |
  * | Wallet::add_blocked_funds      | `üí∞‚ûïüîí`        | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤    |
  * | Wallet::sub_blocked_funds      | `üí∞‚ûñüîí`        | –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤      |
  * 

  - –ü—Ä–æ–≤–æ–¥–∫–∏ –ø–æ —Ñ–æ–Ω–¥–∞–º - –∏—Ö —Ç–æ–∂–µ –æ—Ç–º–µ—Ç—å —Å —Ç–µ–≥–æ–º @post
  * 
  * | –ú–µ—Ç–æ–¥                  | –ò–∫–æ–Ω–∫–∏         | –û–ø–∏—Å–∞–Ω–∏–µ                              |
  * |:-----------------------|:---------------|:--------------------------------------|
  * | Ledger::add                    | `üèõÔ∏è‚ûï‚úÖ`        | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –≤ —Å—á–µ—Ç            |
  * | Ledger::sub                    | `üèõÔ∏è‚ûñ‚úÖ`        | –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ            |
  * | Ledger::block                  | `üèõÔ∏èüîí`         | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á—ë—Ç–µ           |
  * | Ledger::unblock                | `üèõÔ∏èüîì`         | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á—ë—Ç–µ      |

- –µ—Å–ª–∏ —É –¥–µ–π—Å—Ç–≤–∏—è –µ—Å—Ç—å –≤—Ö–æ–¥—è—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç - –æ—Ç–º–µ—Ç–∏—Ç—å –µ–≥–æ —Ç–∞–∫–∂–µ —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–∞ @post

–ü—Ä–∏–º–µ—Ä:
/**

 *
 * @brief –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø–æ –º–µ—Ç–æ–¥—É –í–æ–¥—è–Ω–æ–≤–∞.
 * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –∏—Ç–æ–≥–æ–≤—ã–µ —Å—É–º–º—ã —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤–∫–ª—é—á–∞—è:
 * - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –ø–æ –í–æ–¥—è–Ω–æ–≤—É: (—Å—É–º–º–∞ –≥–æ–ª–æ—Å–æ–≤ + –æ–±—â–∞—è —Å—É–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è) / –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å—É—é—â–∏—Ö
 * - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: 61.8% –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø—Ä–µ–º–∏–π —Ä–∞–≤–Ω–æ –º–µ–∂–¥—É –∞–≤—Ç–æ—Ä–∞–º–∏, 61.8% –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ–º–∏–π –ø—Ä—è–º–æ —Å–æ–∑–¥–∞—Ç–µ–ª—è–º
 * –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ–≥–º–µ–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å –∏—Ç–æ–≥–æ–≤—ã–º–∏ —Å—É–º–º–∞–º–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ –ø–æ –ø—É–ª–∞–º
 * @param coopname –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–∞
 * @param username –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-—É—á–∞—Å—Ç–Ω–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
 * @param project_hash –•–µ—à –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
 * @ingroup public_actions
 * @ingroup public_capital_actions
 * @note –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞: @p coopname
 */
void capital::calcvotes(name coopname, name username, checksum256 project_hash) {
    require_auth(coopname);
    
    // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    auto project = Capital::Projects::get_project_or_fail(coopname, project_hash);
    eosio::check(project.status == Capital::Projects::Status::COMPLETED, "–ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è");
   ... –∏ —Ç.–¥. 


–í–ê–ñ–ù–û: –í–°–ï –î–ï–ô–°–¢–í–ò–Ø –ù–ï–û–ë–•–û–î–ò–ú–û –î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–¢–¨ –í *.cpp —Ñ–∞–π–ª–∞—Ö, –Ω–µ –≤ .hpp!!!
–í–ê–ñ–ù–û2: –ü–û–°–õ–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø @BRIEF –î–û–õ–ñ–ù–ê –ë–´–¢–¨ –¢–û–ß–ö–ê.