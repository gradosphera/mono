# Система гарантийного возврата (диспут)

## Обзор

Новая система диспута работает через создание дополнительных сегментов в рамках существующей пары заявок, а не через создание новых заявок.

## Типы сегментов диспута

- **wreturn** - сегмент возврата товара от заказчика в кооператив
- **wsupply** - сегмент выдачи товара из кооператива поставщику

## Процесс диспута

### 1. Открытие диспута (`dispute`)
- Заказчик подает претензию с документом
- Создаются два новых сегмента: `wreturn` и `wsupply`
- Статус заявки меняется на `disputed`

### 2. Авторизация диспута (`wauthorize`)
- Совет авторизует принятие товара от заказчика
- Совет авторизует последующую выдачу товара поставщику
- Статус заявки меняется на `wauthorized`

### 3. Возврат товара (`wreturn`)
- Заказчик возвращает товар в кооператив
- Председатель принимает товар и подписывает акт
- Статус заявки меняется на `wreturned`

### 4. Предложение товара поставщику (`woffer`)
- Кооператив предлагает поставщику забрать товар
- Создается акт передачи
- Статус заявки меняется на `woffered`

### 5. Принятие решения поставщиком (`waccept`)
- Поставщик может принять товар (`accept=true`) или отказаться (`accept=false`)
- При принятии: статус становится `wcompleted`
- При отказе: статус становится `wdeclined`

## Статусы заявок диспута

- **disputed** - диспут открыт
- **wauthorized** - диспут авторизован советом
- **wreturned** - товар возвращен в кооператив
- **woffered** - товар предложен поставщику
- **wcompleted** - поставщик принял товар, диспут завершен
- **wdeclined** - поставщик отказался от товара, диспут завершен

## Статусы сегментов

- **created** - сегмент создан
- **statement** - документ/заявление предоставлено
- **authorized** - авторизовано советом
- **returned** - товар возвращен в кооператив
- **offered** - товар предложен поставщику
- **accepted** - поставщик принял товар
- **declined** - поставщик отказался от товара
